---
import { experience } from '../data/experience';
---

<section id="experience" class="py-20 px-6 bg-white dark:bg-dark-sidebar">
  <div class="container mx-auto max-w-6xl">
    <h2 class="text-4xl font-bold mb-12 text-center gradient-text">
      Professional Experience
    </h2>
    <div class="space-y-6">
      {experience.map((job, index) => (
        <div class="card card-hover group p-6 border-l-4 border-primary-600 dark:border-l-primary-500 bg-slate-50 dark:bg-dark-highlight">
          <div class="flex flex-col md:flex-row md:justify-between md:items-start gap-4 mb-4">
            <div class="flex-1">
              <h3 class="text-xl font-bold text-slate-900 dark:text-slate-100 mb-1">{job.title}</h3>
              <p class="text-base text-primary-600 dark:text-primary-400 font-semibold mb-1">{job.company}</p>
            </div>
            <div class="text-sm text-slate-600 dark:text-slate-400 md:text-right">
              <div class="font-medium mb-0.5">{job.period}</div>
              <div class="font-medium mb-0.5">{job.location}</div>
            </div>
          </div>
          
          <div class="mb-3">
            <div class="flex items-center gap-2 mb-2">
              <i class="ph-duotone ph-code text-primary-600 dark:text-primary-400 text-sm"></i>
              <span class="text-xs font-semibold text-slate-700 dark:text-slate-300 uppercase tracking-wide">Technologies</span>
            </div>
            <p class="text-sm text-slate-600 dark:text-slate-400 font-mono bg-slate-100 dark:bg-dark-bg p-2 rounded border border-transparent dark:border-dark-border leading-relaxed">
              {job.technologies}
            </p>
          </div>
          
          <div>
            <button 
              class="experience-toggle flex items-center gap-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors mb-3"
              data-job-index={index}
            >
              <i class="ph-fill ph-caret-down text-base transition-transform duration-200"></i>
              <span class="toggle-text">Show responsibilities</span>
            </button>
            
            <ul class="responsibilities-list space-y-2 hidden" data-job-index={index}>
              {job.responsibilities.map(resp => (
                <li class="flex gap-2 text-sm text-slate-700 dark:text-dark-text">
                  <span class="text-primary-600 mt-1 flex-shrink-0">â–¹</span>
                  <span>{resp}</span>
                </li>
              ))}
            </ul>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  const toggleButtons = document.querySelectorAll('.experience-toggle');
  
  toggleButtons.forEach(button => {
    button.addEventListener('click', () => {
      const jobIndex = button.getAttribute('data-job-index');
      const responsibilitiesList = document.querySelector(`.responsibilities-list[data-job-index="${jobIndex}"]`);
      const icon = button.querySelector('i');
      const toggleText = button.querySelector('.toggle-text');
      
      if (responsibilitiesList && icon && toggleText) {
        const isHidden = responsibilitiesList.classList.contains('hidden');
        
        if (isHidden) {
          responsibilitiesList.classList.remove('hidden');
          icon.style.transform = 'rotate(180deg)';
          toggleText.textContent = 'Hide responsibilities';
        } else {
          responsibilitiesList.classList.add('hidden');
          icon.style.transform = 'rotate(0deg)';
          toggleText.textContent = 'Show responsibilities';
        }
      }
    });
  });
</script>
